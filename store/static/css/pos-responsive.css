/* ============================================
   RESPONSIVE CSS PARA POS - MÓVIL
   ============================================ */

/* Tablets y móviles grandes (hasta 992px) */
@media (max-width: 992px) {
    /* Reorganizar layout del POS */
    #POS-field .d-flex {
        flex-direction: column !important;
    }
    
    #POS-field .col-8,
    #POS-field .col-4 {
        width: 100% !important;
        max-width: 100% !important;
    }
    
    /* Tabla más compacta */
    #POS-field table {
        font-size: 0.85rem;
    }
    
    #POS-field table th,
    #POS-field table td {
        padding: 0.4rem 0.3rem !important;
    }
    
    /* Panel de totales abajo, más compacto */
    #POS-field .col-4 .py-4 {
        padding-top: 1rem !important;
        padding-bottom: 1rem !important;
    }
    
    #POS-field dl dt {
        font-size: 1rem !important;
    }
    
    #POS-field dl dd span {
        font-size: 1.5rem !important;
    }
}

/* Móviles pequeños (hasta 768px) */
@media (max-width: 768px) {
    /* Header del POS */
    .mdc-layout-grid__cell h4 {
        font-size: 1.2rem;
    }
    
    /* Fieldsets más compactos */
    fieldset {
        padding: 0.75rem !important;
        margin-bottom: 1rem !important;
    }
    
    fieldset legend {
        font-size: 1rem !important;
        padding: 0 0.5rem;
    }
    
    /* Selector de cliente y lista en columna */
    #pos-form .row .col-lg-6 {
        width: 100% !important;
        margin-bottom: 0.5rem;
    }
    
    /* Selector de producto más grande */
    #product-id + .select2-container {
        font-size: 0.9rem !important;
    }
    
    /* Botones más grandes para touch */
    #add_item,
    #check_out,
    .rem-item {
        min-height: 44px !important;
        padding: 0.5rem 1rem !important;
    }
    
    /* MEJORADO: Tabla con scroll horizontal más obvio */
    #POS-field {
        position: relative;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        /* Indicador visual de scroll */
        background: linear-gradient(90deg, white 0%, transparent 10%, transparent 90%, white 100%);
        background-attachment: local;
    }
    
    #POS-field .d-flex {
        min-width: 700px; /* Ancho mínimo para forzar scroll */
        display: flex !important;
        flex-direction: row !important; /* Mantener lado a lado */
    }
    
    #POS-field .col-8 {
        width: 55% !important;
        flex: 0 0 55%;
    }
    
    #POS-field .col-4 {
        width: 45% !important;
        flex: 0 0 45%;
        position: sticky;
        right: 0;
        z-index: 1;
    }
    
    /* Tabla responsive */
    #POS-field table {
        font-size: 0.8rem;
        width: 100%;
    }
    
    /* NO ocultar precio - mantener todas las columnas */
    #POS-field table th,
    #POS-field table td {
        white-space: nowrap;
        padding: 0.4rem !important;
    }
    
    /* Ajustar anchos de columnas */
    #POS-field table colgroup col:nth-child(1) { width: 8%; }
    #POS-field table colgroup col:nth-child(2) { width: 15%; }
    #POS-field table colgroup col:nth-child(3) { width: 45%; }
    #POS-field table colgroup col:nth-child(4) { width: 15%; }
    #POS-field table colgroup col:nth-child(5) { width: 17%; }
    
    /* Input de cantidad más pequeño */
    #POS-field table input[name="qty[]"] {
        font-size: 0.9rem;
        padding: 0.25rem;
        min-width: 50px;
    }
    
    /* Botón de remover más visible */
    .rem-item {
        padding: 0.25rem 0.5rem !important;
    }
    
    /* Panel de totales con fondo sólido */
    #POS-field .col-4 {
        background: #2c3e50 !important;
        padding: 1rem !important;
        box-shadow: -3px 0 10px rgba(0,0,0,0.2);
    }
    
    #POS-field dl {
        margin-bottom: 0.5rem;
    }
    
    #POS-field dl dt {
        font-size: 0.9rem !important;
        margin-bottom: 0.25rem;
    }
    
    #POS-field dl dd {
        margin-bottom: 0.75rem !important;
    }
    
    #POS-field dl dd span {
        font-size: 1.3rem !important;
    }
    
    #POS-field dl dd input {
        font-size: 1rem !important;
    }
    
    /* Indicador de scroll (opcional) */
    #POS-field::after {
        content: '← Deslizar →';
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: rgba(0,0,0,0.7);
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 5px;
        font-size: 0.9rem;
        pointer-events: none;
        opacity: 0;
        animation: scrollHint 3s ease-in-out 1s 2;
        z-index: 999;
    }
    
    @keyframes scrollHint {
        0%, 100% { opacity: 0; }
        10%, 90% { opacity: 1; }
    }
    
    /* Botón procesar más grande y fixed en móvil */
    #check_out {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        width: 100%;
        z-index: 1000;
        border-radius: 0 !important;
        font-size: 1.1rem;
        padding: 1rem !important;
        box-shadow: 0 -2px 10px rgba(0,0,0,0.3);
    }
    
    /* Espacio para el botón fixed */
    #pos-form .row:last-child {
        margin-bottom: 70px;
    }
}

/* Móviles muy pequeños (hasta 480px) */
@media (max-width: 480px) {
    /* Todo aún más compacto */
    .mdc-card {
        padding: 0.5rem !important;
    }
    
    fieldset {
        padding: 0.5rem !important;
    }
    
    /* Formulario de agregar producto en columna */
    #pos-form .row.align-items-end .col-lg-5,
    #pos-form .row.align-items-end .col-lg-3,
    #pos-form .row.align-items-end .col-lg-4 {
        width: 100% !important;
    }
    
    /* Inputs más grandes para touch */
    input[type="number"],
    select.form-select {
        font-size: 16px !important; /* Evita zoom en iOS */
        min-height: 44px;
    }
    
    /* Select2 más grande */
    .select2-container .select2-selection--single {
        min-height: 44px !important;
    }
    
    .select2-container--default .select2-selection--single .select2-selection__rendered {
        line-height: 44px !important;
    }
    
    /* Labels más visibles */
    label {
        font-weight: 600;
        margin-bottom: 0.5rem;
    }
}

/* Landscape en móviles */
@media (max-width: 768px) and (orientation: landscape) {
    /* Botón procesar no fixed en landscape */
    #check_out {
        position: relative;
        width: auto;
    }
    
    #pos-form .row:last-child {
        margin-bottom: 0;
    }
}

/* ============================================
   MEJORAS ESPECÍFICAS PARA PEDIDOS
   ============================================ */

/* Responsive para crear pedido */
@media (max-width: 768px) {
    /* Botón "Guardar Pedido" fixed en móvil */
    #guardar_pedido {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        width: 100%;
        z-index: 1000;
        border-radius: 0 !important;
        font-size: 1.1rem;
        padding: 1rem !important;
        box-shadow: 0 -2px 10px rgba(0,0,0,0.3);
    }
    
    #pedido-form > .row:last-child {
        margin-bottom: 70px;
    }
    
    /* Panel de total del pedido más compacto */
    #PEDIDO-field .d-flex {
        flex-direction: column !important;
    }
    
    #PEDIDO-field .col-8,
    #PEDIDO-field .col-4 {
        width: 100% !important;
    }
}
